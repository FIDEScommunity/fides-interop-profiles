!function(){"use strict";const e=[{key:"issuanceProtocol",label:"Issuance Protocol",items:[{key:"oid4vci",label:"OID4VCI",hasVersion:!0},{key:"iso18013_5",label:"ISO 18013-5"}]},{key:"remotePresentationProtocol",label:"Remote Presentation Protocol",items:[{key:"oid4vp",label:"OID4VP",hasVersion:!0},{key:"iso18013_7",label:"ISO 18013-7"}]},{key:"credentialFormat",label:"Credential Format",items:[{key:"vcdm20",label:"VCDM 2.0"},{key:"sdJwtVc",label:"SD-JWT VC"},{key:"isoMdoc",label:"ISO mdoc"}]},{key:"credentialStatus",label:"Credential Status",items:[{key:"jwtValidity",label:"JWT Validity"},{key:"pkiCertValidity",label:"PKI Cert Validity"},{key:"ietfTokenStatusList",label:"IETF Token Status List"}]},{key:"identifiers",label:"Entity Identification",items:[{key:"didWeb",label:"did:web"},{key:"didWebvh",label:"did:webvh"},{key:"didJwk",label:"did:jwk"},{key:"httpsIss",label:"HTTPS ISS"},{key:"openidClientId",label:"OpenID Client ID"},{key:"x509Certificate",label:"X.509 Certificate"}]},{key:"signatureScheme",label:"Signature Scheme",items:[{key:"joseJws",label:"JOSE JWS"},{key:"cose",label:"COSE"}]},{key:"signatureAlgorithm",label:"Signature Algorithm",items:[{key:"ecdsaEs256",label:"ECDSA ES256"}]}];let t=null,i=0,n="true"===localStorage.getItem("fides-interop-hide-empty"),s=[];function l(){const n=document.getElementById("fides-interop-matrix-root");if(!n)return;const l=n.dataset.profiles||"";n.dataset.theme;(async function(e){const t=window.fidesInteropMatrix||{};try{const i=await fetch(t.githubDataUrl);if(!i.ok)throw new Error("GitHub fetch failed");return o(await i.json(),e)}catch(i){console.warn("GitHub CDN failed, trying local fallback...",i);try{const i=await fetch(t.dataUrl);if(!i.ok)throw new Error("Local fetch failed");return o(await i.json(),e)}catch(e){throw new Error("Failed to load profile data from both GitHub and local source")}}})(l).then(l=>{t=l,function(t,i){if(!i.profiles||0===i.profiles.length)return void(t.innerHTML='<div class="fides-empty"><p>No interop profiles found.</p></div>');s=function(e){const t=localStorage.getItem("fides-interop-selected-profiles");if(t)try{const i=JSON.parse(t).filter(t=>e.some(e=>e.profile.id===t));if(i.length>0)return i.slice(0,3)}catch(e){console.warn("Failed to parse stored profile selection",e)}const i=["diip-v4","diip-v5","haip-v1"],n=e.filter(e=>i.includes(e.profile.id)).map(e=>e.profile.id);if(0===n.length)return e.slice(0,3).map(e=>e.profile.id);return n}(i.profiles);const n=a(i.profiles,s);t.innerHTML=`\n      <div class="fides-interop-container">\n        ${d(n,i.profiles)}\n        ${function(t){const i=t.map((e,t)=>`\n      <button \n        class="fides-mobile-tab ${0===t?"active":""}" \n        data-index="${t}"\n        type="button"\n      >\n        ${g(e.profile.shortName||e.profile.name+" "+e.profile.version)}\n      </button>\n    `).join(""),n=t.map((t,i)=>`\n      <div \n        class="fides-mobile-panel ${0===i?"active":""}" \n        data-index="${i}"\n        role="tabpanel"\n        aria-labelledby="fides-mobile-tab-${i}"\n        id="fides-mobile-panel-${i}"\n      >\n        ${function(t){const i=e.map(e=>{const i=e.items.map(i=>{const n=t.capabilities[e.key]?.[i.key];return function(e,t,i){if(!t)return`\n        <div class="fides-mobile-capability">\n          <span class="fides-mobile-cap-label">${g(e)}</span>\n          <span class="fides-mobile-cap-value fides-cell-unknown">Unknown</span>\n        </div>\n      `;const n=t.supported,s=!!t.note,l=i&&t.version?t.version:"";let o,r;n?(o="✓",r="fides-cell-supported"):(o="✗",r="fides-cell-not-supported");s&&(r+=" fides-cell-has-note");const a=l?` ${l}`:"",c=s?" ⚠":"",d=s?`data-note="${g(t.note)}"`:"";return`\n      <div class="fides-mobile-capability" ${d}>\n        <span class="fides-mobile-cap-label">${g(e)}</span>\n        <span class="fides-mobile-cap-value ${r}">\n          ${o}${a}${c}\n        </span>\n      </div>\n    `}(i.label,n,i.hasVersion)}).join("");return`\n        <div class="fides-mobile-section">\n          <h3 class="fides-mobile-section-title">${g(e.label)}</h3>\n          <div class="fides-mobile-capabilities">\n            ${i}\n          </div>\n        </div>\n      `}).join("");return`\n      <div class="fides-mobile-profile-header">\n        <h3>\n          ${g(t.profile.shortName||t.profile.name+" "+t.profile.version)}${t.profile.specUrl?`<a href="${g(t.profile.specUrl)}" target="_blank" rel="noopener" class="fides-mobile-spec-link" title="View specification">\n            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">\n              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>\n            </svg>\n          </a>`:""}\n        </h3>\n      </div>\n      ${i}\n    `}(t)}\n      </div>\n    `).join("");return`\n      <div class="fides-matrix-mobile">\n        <div class="fides-mobile-tabs">\n          ${i}\n        </div>\n        <div class="fides-mobile-panels">\n          ${n}\n        </div>\n      </div>\n    `}(i.profiles)}\n      </div>\n    `,f(t),y(t,n),b(t,i.profiles)}(n,l),function(e){const n=e.querySelector(".fides-mobile-panels");if(!n)return;let s=0,l=0;function o(e){const n=s-l,o=50;if(Math.abs(n)<o)return;n>0&&i<(t?.profiles?.length||0)-1?v(e,i+1):n<0&&i>0&&v(e,i-1)}n.addEventListener("touchstart",e=>{s=e.changedTouches[0].screenX},{passive:!0}),n.addEventListener("touchend",t=>{l=t.changedTouches[0].screenX,o(e)},{passive:!0})}(n)}).catch(e=>{!function(e,t){e.innerHTML=`\n      <div class="fides-error">\n        <h3>Failed to load profiles</h3>\n        <p>${g(t.message)}</p>\n      </div>\n    `}(n,e)})}function o(e,t){if(!t)return e;const i=t.split(",").map(e=>e.trim()),n=e.profiles.filter(e=>i.includes(e.profile.id));return{...e,profiles:n,statistics:{...e.statistics,totalProfiles:n.length}}}function r(e){try{localStorage.setItem("fides-interop-selected-profiles",JSON.stringify(e)),s=e}catch(e){console.warn("Failed to save profile selection",e)}}function a(e,t){return e.filter(e=>t.includes(e.profile.id))}function c(e,t){const i=encodeURIComponent(t);if(e.includes("{profile}"))return e.replace("{profile}",i);const n=e.includes("?")?"&":"?";return e+n+"profile="+i}function d(t,i){const l=(window.fidesInteropMatrix||{}).catalogUrls||{},o=t.map(e=>`\n      <th class="fides-matrix-profile-header">\n        <div class="fides-profile-header-content">\n          <strong class="fides-profile-name">${g(e.profile.shortName||e.profile.name+" "+e.profile.version)}</strong>\n        </div>\n        <div class="fides-profile-links">\n          ${e.profile.specUrl?`\n          <a href="${g(e.profile.specUrl)}" target="_blank" rel="noopener" class="fides-profile-link" title="View Interop Profile Details">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>\n              <polyline points="14 2 14 8 20 8"></polyline>\n              <line x1="16" y1="13" x2="8" y2="13"></line>\n              <line x1="16" y1="17" x2="8" y2="17"></line>\n              <polyline points="10 9 9 9 8 9"></polyline>\n            </svg>\n          </a>`:""}\n          ${l.personalWallets?`\n          <a href="${g(c(l.personalWallets,e.profile.shortName||e.profile.name+" "+e.profile.version))}" class="fides-profile-link" title="Show compliant Personal Wallets">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>\n              <circle cx="12" cy="7" r="4"></circle>\n            </svg>\n          </a>`:""}\n          ${l.businessWallets?`\n          <a href="${g(c(l.businessWallets,e.profile.shortName||e.profile.name+" "+e.profile.version))}" class="fides-profile-link" title="Show compliant Business Wallets">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect>\n              <rect x="8" y="6" width="2" height="2"></rect>\n              <rect x="14" y="6" width="2" height="2"></rect>\n              <rect x="8" y="11" width="2" height="2"></rect>\n              <rect x="14" y="11" width="2" height="2"></rect>\n              <rect x="8" y="16" width="2" height="2"></rect>\n              <rect x="14" y="16" width="2" height="2"></rect>\n            </svg>\n          </a>`:""}\n          ${l.relyingParties?`\n          <a href="${g(c(l.relyingParties,e.profile.shortName||e.profile.name+" "+e.profile.version))}" class="fides-profile-link" title="Show compliant Relying Party Websites">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <circle cx="12" cy="12" r="10"></circle>\n              <line x1="2" y1="12" x2="22" y2="12"></line>\n              <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>\n            </svg>\n          </a>`:""}\n        </div>\n      </th>\n    `).join(""),r=e.map(e=>{const i=t.map(e=>`<th class="fides-section-profile-header">${g(e.profile.shortName||e.profile.name+" "+e.profile.version)}</th>`).join(""),s=e.items.map(i=>{const s=t.every(t=>{const n=t.capabilities[e.key]?.[i.key];return!n||!n.supported}),l=t.map(t=>{const n=t.capabilities[e.key]?.[i.key];return function(e,t){if(!e)return'<td class="fides-matrix-cell fides-cell-unknown">?</td>';const i=e.supported,n=!!e.note,s=t&&e.version?e.version:"";let l,o;if(i){l=`<span class="fides-cell-icon fides-icon-check">✓</span>${s?` ${g(s)}`:""}`,o="fides-cell-supported"}else l='<span class="fides-cell-icon fides-icon-cross">✗</span>',o="fides-cell-not-supported";n&&(o+=" fides-cell-has-note",l+=' <span class="fides-cell-note-indicator">⚠</span>');const r=n?`data-note="${g(e.note)}"`:"";return`\n      <td class="fides-matrix-cell ${o}" ${r}>\n        ${l}\n      </td>\n    `}(n,i.hasVersion)}).join("");return`\n          <tr class="fides-matrix-row ${s?"fides-row-all-unsupported":""}" style="${n&&s?"display: none;":""}">\n            <td class="fides-matrix-capability-name">${g(i.label)}</td>\n            ${l}\n          </tr>\n        `}).join("");return`\n        <div class="fides-matrix-section">\n          <table class="fides-matrix-table">\n            <thead>\n              <tr class="fides-section-header-row">\n                <th class="fides-section-title-cell">${g(e.label)}</th>\n                ${i}\n              </tr>\n            </thead>\n            <tbody>\n              ${s}\n            </tbody>\n          </table>\n        </div>\n      `}).join("");return`\n      <div class="fides-matrix-desktop">\n        <div class="fides-matrix-controls">\n          ${function(e){const t=e.map(e=>{const t=s.includes(e.profile.id),i=e.profile.shortName||`${e.profile.name} ${e.profile.version}`;return`\n        <label class="fides-profile-checkbox">\n          <input \n            type="checkbox" \n            value="${g(e.profile.id)}"\n            ${t?"checked":""}\n            data-profile-checkbox\n          />\n          <span class="fides-profile-checkbox-label">${g(i)}</span>\n        </label>\n      `}).join("");return`\n      <div class="fides-profile-selector">\n        <div class="fides-profile-selector-header">\n          <span class="fides-selector-title">Compare Profiles</span>\n          <span class="fides-selector-count">${s.length}/3 selected</span>\n        </div>\n        <div class="fides-profile-selector-content">\n          <div class="fides-profile-checkbox-group">\n            ${t}\n          </div>\n          <div class="fides-selector-actions">\n            <button type="button" class="fides-selector-btn" data-action="reset">Reset</button>\n            <button type="button" class="fides-selector-btn" data-action="select-all">Select All</button>\n          </div>\n        </div>\n        <div class="fides-selector-warning" style="display: none;">\n          Select up to 3 profiles to compare\n        </div>\n      </div>\n    `}(i)}\n          <div class="fides-view-toggle" role="group" aria-label="Row visibility controls">\n            <button \n              type="button" \n              class="fides-view-btn ${n?"":"active"}" \n              data-view="all" \n              aria-label="Show all rows"\n              aria-pressed="${!n}"\n            >\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">\n                <rect x="3" y="3" width="7" height="7" rx="1"></rect>\n                <rect x="14" y="3" width="7" height="7" rx="1"></rect>\n                <rect x="3" y="14" width="7" height="7" rx="1"></rect>\n                <rect x="14" y="14" width="7" height="7" rx="1"></rect>\n              </svg>\n            </button>\n            <button \n              type="button" \n              class="fides-view-btn ${n?"active":""}" \n              data-view="supported" \n              aria-label="Hide unsupported rows"\n              aria-pressed="${n}"\n            >\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">\n                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>\n                <polyline points="22 4 12 14.01 9 11.01"></polyline>\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class="fides-matrix-main-header">\n          <table class="fides-matrix-table">\n            <thead>\n              <tr>\n                <th class="fides-matrix-empty-cell"></th>\n                ${o}\n              </tr>\n            </thead>\n          </table>\n        </div>\n        ${r}\n      </div>\n    `}function f(e){e.querySelectorAll("[data-note]").forEach(e=>{e.addEventListener("mouseenter",p),e.addEventListener("mouseleave",h),e.addEventListener("click",u)});e.querySelectorAll(".fides-mobile-tab").forEach(t=>{t.addEventListener("click",()=>{const i=parseInt(t.dataset.index);v(e,i)})})}function p(e){const t=e.currentTarget.dataset.note;if(!t)return;h();const i=document.createElement("div");i.className="fides-tooltip",i.textContent=t,document.body.appendChild(i);const n=e.currentTarget.getBoundingClientRect();i.style.left=n.left+n.width/2-i.offsetWidth/2+"px",i.style.top=n.top-i.offsetHeight-8+"px",i.offsetLeft<0&&(i.style.left="8px"),i.offsetLeft+i.offsetWidth>window.innerWidth&&(i.style.left=window.innerWidth-i.offsetWidth-8+"px"),setTimeout(()=>i.classList.add("visible"),10)}function h(){const e=document.querySelector(".fides-tooltip");e&&e.remove()}function u(e){if(window.innerWidth>768)return;e.stopPropagation();document.querySelector(".fides-tooltip")?h():p(e)}function v(e,t){i=t;const n=e.querySelectorAll(".fides-mobile-tab"),s=e.querySelectorAll(".fides-mobile-panel");n.forEach((e,i)=>{const n=i===t;e.classList.toggle("active",n),e.setAttribute("aria-selected",n?"true":"false")}),s.forEach((e,i)=>{e.classList.toggle("active",i===t)})}function b(e,t){const i=e.querySelectorAll("[data-profile-checkbox]"),n=e.querySelector(".fides-selector-warning"),l=(e.querySelector(".fides-selector-count"),e.querySelector('[data-action="reset"]')),o=e.querySelector('[data-action="select-all"]');i.length&&(i.forEach(i=>{i.addEventListener("change",()=>{const l=i.value;let o=[...s];if(i.checked){if(o.length>=3)return i.checked=!1,void function(e){if(!e)return;e.style.display="block",setTimeout(()=>{e.style.display="none"},3e3)}(n);o.push(l)}else if(o=o.filter(e=>e!==l),0===o.length)return void(i.checked=!0);r(o),m(e,t)})}),l&&l.addEventListener("click",()=>{const i=["diip-v4","diip-v5","haip-v1"],n=t.filter(e=>i.includes(e.profile.id)).map(e=>e.profile.id);r(n.length>0?n:t.slice(0,3).map(e=>e.profile.id)),m(e,t)}),o&&o.addEventListener("click",()=>{r(t.slice(0,3).map(e=>e.profile.id)),m(e,t)}))}function m(e,t){const i=a(t,s),n=e.querySelector(".fides-matrix-desktop");n&&(n.outerHTML=d(i,t),f(e),y(e,i),b(e,t))}function y(e,t){const i=e.querySelectorAll(".fides-view-btn");0!==i.length&&i.forEach(t=>{t.addEventListener("click",s=>{const l=t.dataset.view;n="supported"===l,localStorage.setItem("fides-interop-hide-empty",n),i.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")}),t.classList.add("active"),t.setAttribute("aria-pressed","true");e.querySelectorAll(".fides-row-all-unsupported").forEach(e=>{e.style.display=n?"none":""})})})}function g(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l(),document.addEventListener("scroll",h,{passive:!0}),document.addEventListener("click",e=>{e.target.closest("[data-note]")||h()})}();