!function(){"use strict";const e=[{key:"issuanceProtocol",label:"Issuance Protocol",items:[{key:"oid4vci",label:"OID4VCI",hasVersion:!0},{key:"other",label:"Other"}]},{key:"presentationProtocol",label:"Presentation Protocol",items:[{key:"oid4vp",label:"OID4VP",hasVersion:!0},{key:"other",label:"Other"}]},{key:"credentialFormat",label:"Credential Format",items:[{key:"sdJwtVc",label:"SD-JWT VC"},{key:"isoMdoc",label:"ISO mDL"},{key:"vcdm20",label:"VCDM 2.0"}]},{key:"credentialIssuerIdentifiers",label:"Issuer Identifiers",items:[{key:"httpsIss",label:"HTTPS ISS"},{key:"x509DocumentSigner",label:"X.509 Document Signer"},{key:"didWeb",label:"did:web"},{key:"didWebvh",label:"did:webvh"},{key:"didJwk",label:"did:jwk"},{key:"other",label:"Other"}]},{key:"credentialHolderBinding",label:"Holder Binding",items:[{key:"cnfKeyBinding",label:"CNF Key Binding"},{key:"deviceBound",label:"Device Bound"},{key:"didWebOrganisations",label:"did:web (Orgs)"},{key:"didJwkPersons",label:"did:jwk (Persons)"},{key:"didWebvh",label:"did:webvh"},{key:"other",label:"Other"}]},{key:"verifierAuthentication",label:"Verifier Authentication",items:[{key:"openidClientIdAuth",label:"OpenID Client ID Auth"},{key:"x509ReaderCertificate",label:"X.509 Reader Cert"},{key:"didWeb",label:"did:web"},{key:"didWebvh",label:"did:webvh"},{key:"didJwk",label:"did:jwk"},{key:"other",label:"Other"}]},{key:"credentialStatus",label:"Credential Status",items:[{key:"jwtValidity",label:"JWT Validity"},{key:"pkiCertValidity",label:"PKI Cert Validity"},{key:"ietfTokenStatusList",label:"IETF Token Status List"},{key:"w3cStatusList2021",label:"W3C Status List 2021"},{key:"w3cBitstringStatusList",label:"W3C Bitstring Status List"},{key:"other",label:"Other"}]},{key:"signatureScheme",label:"Signature Scheme",items:[{key:"joseJws",label:"JOSE JWS"},{key:"cose",label:"COSE"},{key:"w3cDataIntegrity",label:"W3C Data Integrity"},{key:"other",label:"Other"}]},{key:"signatureAlgorithms",label:"Signature Algorithms",items:[{key:"ecdsaEs256",label:"ECDSA ES256"},{key:"eddsa",label:"EdDSA"},{key:"rsa",label:"RSA"},{key:"pqOther",label:"Post-Quantum / Other"}]}];let t=null,i=0,n="true"===localStorage.getItem("fides-interop-hide-empty");function s(){const s=document.getElementById("fides-interop-matrix-root");if(!s)return;const f=s.dataset.profiles||"";s.dataset.theme;(async function(e){const t=window.fidesInteropMatrix||{};try{const i=await fetch(t.githubDataUrl);if(!i.ok)throw new Error("GitHub fetch failed");return l(await i.json(),e)}catch(i){console.warn("GitHub CDN failed, trying local fallback...",i);try{const i=await fetch(t.dataUrl);if(!i.ok)throw new Error("Local fetch failed");return l(await i.json(),e)}catch(e){throw new Error("Failed to load profile data from both GitHub and local source")}}})(f).then(l=>{t=l,function(t,i){if(!i.profiles||0===i.profiles.length)return void(t.innerHTML='<div class="fides-empty"><p>No interop profiles found.</p></div>');t.innerHTML=`\n      <div class="fides-interop-container">\n        ${function(t){const i=t.map(e=>`\n      <th class="fides-matrix-profile-header">\n        <div class="fides-profile-header-content">\n          <strong class="fides-profile-name">${c(e.profile.shortName||e.profile.name+" "+e.profile.version)}</strong>${e.profile.specUrl?`<a href="${c(e.profile.specUrl)}" target="_blank" rel="noopener" class="fides-profile-spec-link" title="View specification">\n            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">\n              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>\n            </svg>\n          </a>`:""}\n        </div>\n      </th>\n    `).join(""),s=e.map(e=>{const i=t.map(e=>`<th class="fides-section-profile-header">${c(e.profile.shortName||e.profile.name+" "+e.profile.version)}</th>`).join(""),s=e.items.map(i=>{const s=t.every(t=>{const n=t.capabilities[e.key]?.[i.key];return!n||!n.supported}),l=t.map(t=>{const n=t.capabilities[e.key]?.[i.key];return function(e,t){if(!e)return'<td class="fides-matrix-cell fides-cell-unknown">?</td>';const i=e.supported,n=!!e.note,s=t&&e.version?e.version:"";let l,a;if(i){l=`<span class="fides-cell-icon fides-icon-check">✓</span>${s?` ${c(s)}`:""}`,a="fides-cell-supported"}else l='<span class="fides-cell-icon fides-icon-cross">✗</span>',a="fides-cell-not-supported";n&&(a+=" fides-cell-has-note",l+=' <span class="fides-cell-note-indicator">⚠</span>');const o=n?`data-note="${c(e.note)}"`:"";return`\n      <td class="fides-matrix-cell ${a}" ${o}>\n        ${l}\n      </td>\n    `}(n,i.hasVersion)}).join("");return`\n          <tr class="fides-matrix-row ${s?"fides-row-all-unsupported":""}" style="${n&&s?"display: none;":""}">\n            <td class="fides-matrix-capability-name">${c(i.label)}</td>\n            ${l}\n          </tr>\n        `}).join("");return`\n        <div class="fides-matrix-section">\n          <table class="fides-matrix-table">\n            <thead>\n              <tr class="fides-section-header-row">\n                <th class="fides-section-title-cell">${c(e.label)}</th>\n                ${i}\n              </tr>\n            </thead>\n            <tbody>\n              ${s}\n            </tbody>\n          </table>\n        </div>\n      `}).join("");return`\n      <div class="fides-matrix-desktop">\n        <div class="fides-matrix-controls">\n          <div class="fides-view-toggle" role="group" aria-label="Row visibility controls">\n            <button \n              type="button" \n              class="fides-view-btn ${n?"":"active"}" \n              data-view="all" \n              aria-label="Show all rows"\n              aria-pressed="${!n}"\n            >\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">\n                <rect x="3" y="3" width="7" height="7" rx="1"></rect>\n                <rect x="14" y="3" width="7" height="7" rx="1"></rect>\n                <rect x="3" y="14" width="7" height="7" rx="1"></rect>\n                <rect x="14" y="14" width="7" height="7" rx="1"></rect>\n              </svg>\n            </button>\n            <button \n              type="button" \n              class="fides-view-btn ${n?"active":""}" \n              data-view="supported" \n              aria-label="Hide unsupported rows"\n              aria-pressed="${n}"\n            >\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">\n                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>\n                <polyline points="22 4 12 14.01 9 11.01"></polyline>\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class="fides-matrix-main-header">\n          <table class="fides-matrix-table">\n            <thead>\n              <tr>\n                <th class="fides-matrix-empty-cell"></th>\n                ${i}\n              </tr>\n            </thead>\n          </table>\n        </div>\n        ${s}\n      </div>\n    `}(i.profiles)}\n        ${function(t){const i=t.map((e,t)=>`\n      <button \n        class="fides-mobile-tab ${0===t?"active":""}" \n        data-index="${t}"\n        type="button"\n      >\n        ${c(e.profile.shortName||e.profile.name+" "+e.profile.version)}\n      </button>\n    `).join(""),n=t.map((t,i)=>`\n      <div \n        class="fides-mobile-panel ${0===i?"active":""}" \n        data-index="${i}"\n        role="tabpanel"\n        aria-labelledby="fides-mobile-tab-${i}"\n        id="fides-mobile-panel-${i}"\n      >\n        ${function(t){const i=e.map(e=>{const i=e.items.map(i=>{const n=t.capabilities[e.key]?.[i.key];return function(e,t,i){if(!t)return`\n        <div class="fides-mobile-capability">\n          <span class="fides-mobile-cap-label">${c(e)}</span>\n          <span class="fides-mobile-cap-value fides-cell-unknown">Unknown</span>\n        </div>\n      `;const n=t.supported,s=!!t.note,l=i&&t.version?t.version:"";let a,o;n?(a="✓",o="fides-cell-supported"):(a="✗",o="fides-cell-not-supported");s&&(o+=" fides-cell-has-note");const r=l?` ${l}`:"",d=s?" ⚠":"",f=s?`data-note="${c(t.note)}"`:"";return`\n      <div class="fides-mobile-capability" ${f}>\n        <span class="fides-mobile-cap-label">${c(e)}</span>\n        <span class="fides-mobile-cap-value ${o}">\n          ${a}${r}${d}\n        </span>\n      </div>\n    `}(i.label,n,i.hasVersion)}).join("");return`\n        <div class="fides-mobile-section">\n          <h3 class="fides-mobile-section-title">${c(e.label)}</h3>\n          <div class="fides-mobile-capabilities">\n            ${i}\n          </div>\n        </div>\n      `}).join("");return`\n      <div class="fides-mobile-profile-header">\n        <h3>\n          ${c(t.profile.shortName||t.profile.name+" "+t.profile.version)}${t.profile.specUrl?`<a href="${c(t.profile.specUrl)}" target="_blank" rel="noopener" class="fides-mobile-spec-link" title="View specification">\n            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">\n              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>\n            </svg>\n          </a>`:""}\n        </h3>\n      </div>\n      ${i}\n    `}(t)}\n      </div>\n    `).join("");return`\n      <div class="fides-matrix-mobile">\n        <div class="fides-mobile-tabs">\n          ${i}\n        </div>\n        <div class="fides-mobile-panels">\n          ${n}\n        </div>\n      </div>\n    `}(i.profiles)}\n      </div>\n    `,function(e){const t=e.querySelectorAll("[data-note]");t.forEach(e=>{e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",o),e.addEventListener("click",r)});const i=e.querySelectorAll(".fides-mobile-tab");i.forEach(t=>{t.addEventListener("click",()=>{const i=parseInt(t.dataset.index);d(e,i)})})}(t),function(e){const t=e.querySelectorAll(".fides-view-btn");if(0===t.length)return;t.forEach(i=>{i.addEventListener("click",s=>{const l=i.dataset.view;n="supported"===l,localStorage.setItem("fides-interop-hide-empty",n),t.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")}),i.classList.add("active"),i.setAttribute("aria-pressed","true");e.querySelectorAll(".fides-row-all-unsupported").forEach(e=>{e.style.display=n?"none":""})})})}(t,i.profiles)}(s,l),function(e){const n=e.querySelector(".fides-mobile-panels");if(!n)return;let s=0,l=0;function a(e){const n=s-l,a=50;if(Math.abs(n)<a)return;n>0&&i<(t?.profiles?.length||0)-1?d(e,i+1):n<0&&i>0&&d(e,i-1)}n.addEventListener("touchstart",e=>{s=e.changedTouches[0].screenX},{passive:!0}),n.addEventListener("touchend",t=>{l=t.changedTouches[0].screenX,a(e)},{passive:!0})}(s)}).catch(e=>{!function(e,t){e.innerHTML=`\n      <div class="fides-error">\n        <h3>Failed to load profiles</h3>\n        <p>${c(t.message)}</p>\n      </div>\n    `}(s,e)})}function l(e,t){if(!t)return e;const i=t.split(",").map(e=>e.trim()),n=e.profiles.filter(e=>i.includes(e.profile.id));return{...e,profiles:n,statistics:{...e.statistics,totalProfiles:n.length}}}function a(e){const t=e.currentTarget.dataset.note;if(!t)return;o();const i=document.createElement("div");i.className="fides-tooltip",i.textContent=t,document.body.appendChild(i);const n=e.currentTarget.getBoundingClientRect();i.style.left=n.left+n.width/2-i.offsetWidth/2+"px",i.style.top=n.top-i.offsetHeight-8+"px",i.offsetLeft<0&&(i.style.left="8px"),i.offsetLeft+i.offsetWidth>window.innerWidth&&(i.style.left=window.innerWidth-i.offsetWidth-8+"px"),setTimeout(()=>i.classList.add("visible"),10)}function o(){const e=document.querySelector(".fides-tooltip");e&&e.remove()}function r(e){if(window.innerWidth>768)return;e.stopPropagation();document.querySelector(".fides-tooltip")?o():a(e)}function d(e,t){i=t;const n=e.querySelectorAll(".fides-mobile-tab"),s=e.querySelectorAll(".fides-mobile-panel");n.forEach((e,i)=>{const n=i===t;e.classList.toggle("active",n),e.setAttribute("aria-selected",n?"true":"false")}),s.forEach((e,i)=>{e.classList.toggle("active",i===t)})}function c(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s(),document.addEventListener("scroll",o,{passive:!0}),document.addEventListener("click",e=>{e.target.closest("[data-note]")||o()})}();